# 🚀 مدیریت هوشمند آگهی خودرو با هوش مصنوعی

این برنامه وب پیشرفته به شما امکان می‌دهد تصاویر آگهی‌های خودرو را بارگذاری کرده و با استفاده از قدرت هوش مصنوعی (Google Gemini یا AvalAI)، به صورت هوشمند **نوع آگهی (فروش یا خرید)** را تشخیص داده و اطلاعات کلیدی آن را استخراج کنید. داده‌های استخراج شده در جداول مجزا و کاربرپسند نمایش داده شده و قابلیت‌های پیشرفته‌ای مانند **ارائه پیشنهاد هوشمند** بین خریداران و فروشندگان، **مدیریت کامل جلسه** (ذخیره و بارگذاری)، و **خروجی CSV** را فراهم می‌کند.

## ✨ ویژگی‌های برجسته

-   **پردازش هوشمند**: تشخیص نوع آگهی (فروشنده/خریدار) و استخراج داده‌ها با یک درخواست API.
-   **پشتیبانی از چند سرویس‌دهنده AI**: قابلیت انتخاب بین Google Gemini و AvalAI از طریق تنظیمات.
-   **موتور پیشنهادات هوشمند**: ارائه خودکار پیشنهادات خرید و فروش بر اساس تطابق مدل، رنگ و قیمت.
-   **مدیریت پیشرفته نرمال‌سازی**: قابلیت تعریف کلمات کلیدی اصلی و قوانین سفارشی برای نرمال‌سازی نام خودروها جهت بهبود دقت پیشنهادات.
-   **ذخیره‌سازی و بارگذاری جلسه**: ذخیره کامل وضعیت برنامه (لیست‌ها، تصاویر، قوانین) در یک فایل `ZIP` و بارگذاری مجدد آن.
-   **ذخیره‌سازی بهینه تصاویر**: استفاده از IndexedDB برای ذخیره تصاویر در مرورگر، افزایش پایداری و جلوگیری از کرش با حجم بالای داده.
-   **پردازش دسته‌ای و مدیریت صف**: کنترل هوشمند تعداد درخواست‌های همزمان و فاصله زمانی بین آن‌ها برای جلوگیری از خطای Rate Limit.
-   **بهینه‌سازی تصویر**: قابلیت تغییر اندازه و فشرده‌سازی تصاویر قبل از ارسال به API برای کاهش هزینه و افزایش سرعت.
-   **ورودی دستی**: امکان افزودن دستی آگهی فروشنده و خریدار علاوه بر تحلیل تصویر.
-   **رابط کاربری فارسی و مدرن**: طراحی کاملاً واکنش‌گرا (Responsive) و بهینه برای زبان فارسی.
-   **اجرا سمت کاربر**: برنامه به صورت کامل در مرورگر شما (Client-Side) اجرا می‌شود و نیازی به سرور بک‌اند ندارد.

## 🏁 شروع سریع (Quick Start)

برای راه‌اندازی و استفاده از این برنامه، مراحل ساده زیر را دنبال کنید.

### پیش‌نیازها
*   **Node.js و npm**: برای اجرای این برنامه به Node.js (نسخه 16 یا بالاتر) و npm نیاز دارید. می‌توانید از [سایت رسمی Node.js](https://nodejs.org/) آن را دانلود و نصب کنید.

### مراحل راه‌اندازی

#### مرحله ۱: دریافت فایل‌های پروژه
فایل‌های پروژه را دانلود کرده و در یک پوشه در کامپیوتر خود قرار دهید.

#### مرحله ۲: نصب وابستگی‌ها
۱.  ترمینال (Command Prompt, PowerShell, یا Terminal در مک/لینوکس) را باز کنید.
۲.  با استفاده از دستور `cd` به پوشه‌ای که فایل‌های پروژه را در آن قرار داده‌اید، بروید.
    ```bash
    cd path/to/your/project-folder
    ```
۳.  دستور زیر را برای نصب وابستگی‌های برنامه اجرا کنید. این دستور پکیج‌های لازم برای اجرای سرور محلی را نصب می‌کند.
    ```bash
    npm install
    ```

#### مرحله ۳: اجرای برنامه
۱.  پس از اینکه نصب وابستگی‌ها تمام شد، دستور زیر را در همان ترمینال اجرا کنید:
    ```bash
    npm start
    ```
۲.  این دستور یک سرور توسعه محلی راه‌اندازی می‌کند و معمولاً آدرسی مانند `http://localhost:5173` را در ترمینال نمایش می‌دهد.

#### مرحله ۴: باز کردن برنامه و تنظیم کلید API
۱.  آدرسی که ترمینال نمایش داده است (مثلاً `http://localhost:5173`) را در مرورگر وب خود باز کنید.
۲.  **مهم‌ترین مرحله**: برای اینکه برنامه کار کند، باید کلید API خود را تنظیم کنید.
    *   در گوشه بالا-چپ صفحه، روی آیکون چرخ‌دنده (⚙️) کلیک کنید تا **پنجره تنظیمات** باز شود.
    *   در بخش "سرویس‌دهنده هوش مصنوعی"، سرویس مورد نظر خود را انتخاب کنید (مثلاً **Google Gemini**).
    *   کلید API معتبر خود را که از [Google AI Studio](https://aistudio.google.com/app/apikey) یا پنل سرویس‌دهنده دیگر دریافت کرده‌اید، در کادر مربوطه وارد (Paste) کنید. برای Gemini می‌توانید چندین کلید وارد کنید تا برنامه به صورت خودکار بین آن‌ها جابجا شود.
    *   روی دکمه **"ذخیره و بستن"** کلیک کنید.

**تبریک!** برنامه شما آماده استفاده است.

## 📖 نحوه استفاده از برنامه

1.  **انتخاب تصاویر**: روی دکمه "انتخاب تصاویر خودرو" کلیک کرده و یک یا چند تصویر را انتخاب کنید. پردازش به صورت خودکار آغاز می‌شود.
2.  **مشاهده نتایج**: وضعیت پردازش هر تصویر در "لیست فروشندگان" نمایش داده می‌شود. اگر آگهی مربوط به خریدار باشد، به طور خودکار به تب "لیست درخواست‌های خرید" منتقل می‌شود.
3.  **ایجاد پیشنهادات**: به تب "لیست پیشنهادات خودرو" بروید. در این بخش می‌توانید قوانین نرمال‌سازی را مدیریت کرده و با کلیک روی دکمه "ایجاد / بروزرسانی پیشنهادات هوشمند"، بهترین گزینه‌های خرید و فروش را مشاهده کنید.
4.  **ذخیره جلسه**: از بخش "مدیریت جلسه" برای ذخیره کل داده‌های خود در یک فایل ZIP استفاده کنید تا بعداً بتوانید آن را بازیابی کنید.

## 🆘 عیب‌یابی (Troubleshooting)

### خطای احراز هویت (Authentication Error)
اگر با خطایی مربوط به "احراز هویت" یا "کلید API نامعتبر" مواجه شدید، موارد زیر را بررسی کنید:
1.  **صحت کلید API**: مطمئن شوید کلید API را دقیقاً و بدون هیچ فاصله یا کاراکتر اضافی در **پنجره تنظیمات** برنامه وارد کرده‌اید.
2.  **فعال بودن API در پنل سرویس‌دهنده**:
    *   **برای Google Gemini**: در پروژه Google Cloud خود، مطمئن شوید **"Generative Language API"** فعال است و حساب صورتحساب (Billing) شما مشکلی ندارد.
    *   **برای AvalAI**: از فعال بودن حساب و کلید خود در پنل AvalAI اطمینان حاصل کنید.
3.  **محدودیت‌های کلید**: اگر برای کلید API خود محدودیت‌هایی (مانند محدودیت دامنه HTTP) تنظیم کرده‌اید، مطمئن شوید که آدرس `localhost` مجاز به استفاده از آن است. برای آزمایش محلی، ساده‌ترین راه برداشتن موقت این محدودیت‌هاست.

برای اطلاعات دقیق‌تر از خطا، همیشه **کنسول مرورگر** (F12 > Console) را بررسی کنید.

## 🛠️ تکنولوژی‌ها و کتابخانه‌های استفاده شده

-   **React (v19+)**: برای ساخت رابط کاربری.
-   **TypeScript**: برای تایپ ایستا.
-   **Vite**: به عنوان یک ابزار مدرن و سریع برای سرور توسعه و ساخت پروژه.
-   **@google/genai**: برای تعامل با مدل‌های Gemini.
-   **Tailwind CSS**: برای طراحی رابط کاربری.
-   **idb**: کتابخانه‌ای سبک برای کار با IndexedDB.
-   **jszip**: برای ساخت فایل‌های ZIP جهت ذخیره جلسه.

## 📝 نکات مهم

-   **امنیت کلید API**: کلید API خود را محرمانه نگه دارید و آن را در مکان‌های عمومی به اشتراک نگذارید.
-   **پایداری داده‌ها (Data Persistence)**: تمام داده‌های شما (لیست‌ها، تنظیمات، قوانین) و تصاویر در حافظه مرورگر (`localStorage` و `IndexedDB`) ذخیره می‌شوند. این داده‌ها با بستن مرورگر پاک نمی‌شوند، اما با پاک کردن "Site Data" از تنظیمات مرورگر، حذف خواهند شد.